(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.yadr = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";module.exports=require("./yadr");

},{"./yadr":4}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var composeAll=function(r){return r.reduce(function(r,n){return function(){return r(n.apply(void 0,arguments))}})};exports.composeAll=composeAll;var isFunction=function(r){return"function"==typeof r};exports.isFunction=isFunction;var isString=function(r){return"string"==typeof r};exports.isString=isString;var range=function(r){return Array.from(Array(Number(r)).keys())};exports.range=range;var take=function(r,n){return n.slice(0,r)};exports.take=take;var id=function(r){return r};exports.id=id;var sum=function(r){return r.reduce(function(r,n){return r+n},0)};exports.sum=sum;var rnd=function(r){return Math.round(Math.random()*(r-1))+1};exports.rnd=rnd;var dice=function(r){return function(){return rnd(r)}};exports.dice=dice;var up=function(r,n){return r-n};exports.up=up;var down=function(r,n){return n-r};exports.down=down;

},{}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function r(r,e){var t=[],n=!0,o=!1,u=void 0;try{for(var i,a=r[Symbol.iterator]();!(n=(i=a.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(d){o=!0,u=d}finally{try{!n&&a["return"]&&a["return"]()}finally{if(o)throw u}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports["default"]=function(r){var e=r.match(/(?:(?:(best|worst)(?: (\d+))? ),?(?: *(?:of|from) )?)?(?:(\d+)?d(\d+))( *(?: *(?:[+-] *\d+))+)*/),t=_slicedToArray(e,6),n=t[0],o=t[1],u=t[2],i=t[3],a=void 0===i?1:i,d=t[4],c=t[5],s=void 0===c?"":c;u=Number(u)||void 0,a=Number(a),d=Number(d),s=(s.match(/(\+ *(\d+)|- *\d+)/g)||[]).map(function(r){return r.replace(/ +/g,"")}).reduce(function(r,e){return Number(r)+Number(e)},0);var l=s>=0?"+":"-";return{input:n,type:o,take:u,dices:a,sides:d,sign:l,mod:s}},module.exports=exports["default"];

},{}],4:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function yadr(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.debug,r=void 0===t?!1:t,s={mod:0,sign:"+",sides:"",dices:"",take:0,type:void 0,rolls:[],result:{},debug:r};return Object.assign(Object.create(Roller),s)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=yadr;var _parser=require("./parser"),_parser2=_interopRequireDefault(_parser),_helpers=require("./helpers"),Roller={roll:function(e){return Object.assign(this,_parser2["default"](e)),this},then:function(){return this},takeBest:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return this.take=e,this.type="best",this},takeWorst:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return this.take=e,this.type="worst",this},minus:function(e){return this.mod-=e,this.sign=this.mod<=0?"-":"+",this},plus:function(e){return this.mod+=e,this.sign=this.mod<=0?"-":"+",this},run:function(e){return this.make(e)()},make:function(e){var t=this,r=composeRoll(this);return function(s){_helpers.isString(s)&&(t.roll(s),r=composeRoll(t));var n=r();return _helpers.isFunction(e)?e(n):n.total}}},composeRoll=function(e){return _helpers.composeAll([adder(e),taker(e),roller(e)])},roller=function(e){return function(){return e.debug&&console.log("rolling "+e.dices+"d"+e.sides),e.rolls=_helpers.range(Number(e.dices)).map(_helpers.dice(e.sides)),e.rolls}},taker=function(e){return e.take?function(t){return e.debug&&console.log("taking "+e.take+" "+e.type+" from "+t),e.taken=_helpers.take(e.take,Array.from(t).sort("best"===e.type?_helpers.down:_helpers.up)),e.taken}:_helpers.id},adder=function(e){return function(t){return e.mod&&e.debug&&console.log((e.mod<0?"sub":"add")+" "+e.mod),e.total=_helpers.sum(t)+e.mod,e}};module.exports=exports["default"];

},{"./helpers":2,"./parser":3}]},{},[1])(1)
});