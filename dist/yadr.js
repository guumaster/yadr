(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.yadr = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";module.exports=require("./yadr");

},{"./yadr":4}],2:[function(require,module,exports){
"use strict";var composeAll=function(n){return n.reduce(function(n,r){return function(){return n(r.apply(void 0,arguments))}})},isFunction=function(n){return"function"==typeof n},isString=function(n){return"string"==typeof n},range=function(n){return Array.from(Array(Number(n)).keys())},take=function(n,r){return r.slice(0,n)},id=function(n){return n},sum=function(n){return n.reduce(function(n,r){return n+r},0)},rnd=function(n){return Math.round(Math.random()*(n-1))+1},dice=function(n){return function(){return rnd(n)}},up=function(n,r){return n-r},down=function(n,r){return r-n};module.exports={composeAll:composeAll,isFunction:isFunction,isString:isString,range:range,take:take,id:id,sum:sum,rnd:rnd,dice:dice,up:up,down:down};

},{}],3:[function(require,module,exports){
"use strict";var _slicedToArray=function(){function r(r,t){var e=[],n=!0,i=!1,o=void 0;try{for(var u,a=r[Symbol.iterator]();!(n=(u=a.next()).done)&&(e.push(u.value),!t||e.length!==t);n=!0);}catch(d){i=!0,o=d}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();module.exports=function(r){var t=r.match(/(?:(?:(best|worst)(?: (\d+))? ),?(?: *(?:of|from) )?)?(?:(\d+)?d(\d+))( *(?: *(?:[+-] *\d+))+)*/),e=_slicedToArray(t,6),n=e[0],i=e[1],o=e[2],u=e[3],a=void 0===u?1:u,d=e[4],c=e[5],s=void 0===c?"":c;o=Number(o)||void 0,a=Number(a),d=Number(d),s=(s.match(/(\+ *(\d+)|- *\d+)/g)||[]).map(function(r){return r.replace(/ +/g,"")}).reduce(function(r,t){return Number(r)+Number(t)},0);var f=s>=0?"+":"-";return{input:n,type:i,take:o,dices:a,sides:d,sign:f,mod:s}};

},{}],4:[function(require,module,exports){
"use strict";var parser=require("./parser"),_require=require("./helpers"),composeAll=_require.composeAll,isFunction=_require.isFunction,isString=_require.isString,_require2=require("./helpers"),dice=_require2.dice,down=_require2.down,up=_require2.up,range=_require2.range,id=_require2.id,rnd=_require2.rnd,sum=_require2.sum,take=_require2.take;module.exports=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=e.debug,t=void 0===r?!1:r,i={mod:0,sign:"+",sides:"",dices:"",take:0,type:void 0,rolls:[],result:{},debug:t};return Object.assign(Object.create(Roller),i)};var Roller={roll:function(e){return Object.assign(this,parser(e)),this},then:function(){return this},takeBest:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return this.take=e,this.type="best",this},takeWorst:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];return this.take=e,this.type="worst",this},minus:function(e){return this.mod-=e,this.sign=this.mod<=0?"-":"+",this},plus:function(e){return this.mod+=e,this.sign=this.mod<=0?"-":"+",this},run:function(e){return this.make(e)()},make:function(e){var r=this,t=composeRoll(this);return function(i){isString(i)&&(r.roll(i),t=composeRoll(r));var n=t();return isFunction(e)?e(n):n.total}}},composeRoll=function(e){return composeAll([adder(e),taker(e),roller(e)])},roller=function(e){return function(){return e.debug&&console.log("rolling "+e.dices+"d"+e.sides),e.rolls=range(Number(e.dices)).map(dice(e.sides)),e.rolls}},taker=function(e){return e.take?function(r){return e.debug&&console.log("taking "+e.take+" "+e.type+" from "+r),e.taken=take(e.take,Array.from(r).sort("best"===e.type?down:up)),e.taken}:id},adder=function(e){return function(r){return e.mod&&e.debug&&console.log((e.mod<0?"sub":"add")+" "+e.mod),e.total=sum(r)+e.mod,e}};

},{"./helpers":2,"./parser":3}]},{},[1])(1)
});